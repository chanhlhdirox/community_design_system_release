import { Component, Input, Inject, Output, EventEmitter } from '@angular/core';
import { AutoUnsubscribeComponent } from '../../../../../src/lib/utils';
import { UpSidebarService } from '../../services/sidebar.service';
import { getLongestWord } from '../../../../../src/lib/helpers/strings/get-longest-word';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../../../../typography/title/title.directive";
import * as i3 from "../../../../typography/paragraph/paragraph.directive";
import * as i4 from "../../../../icons/icon.directive";
import * as i5 from "../../../../tooltip/tooltip.directive";
import * as i6 from "../../../../spacing/spacing.directive";
import * as i7 from "../../../../ellipsis/text-ellipsis.component";
import * as i8 from "../../services/sidebar.service";
export class UpSidebarHeaderComponent extends AutoUnsubscribeComponent {
    constructor(upSidebarService) {
        super();
        this.upSidebarService = upSidebarService;
        this.collapsed = false;
        this.chevronToggled = false;
        this.showCompanySwitcher = false;
        this.toggleDropdown = new EventEmitter();
        this.hasLongCompanyName = false;
        this.MAX_CHARACTERS_WORD_ALLOWED = 20;
    }
    ngOnInit() {
        this.sidebarStateSubscription = this.upSidebarService.toggleSidebar.subscribe((state) => (this.collapsed = state));
        this.addSubscriptions(this.sidebarStateSubscription);
        this.setHasLongCompanyName();
    }
    ngOnChanges(changes) {
        if (changes.companyName) {
            this.setHasLongCompanyName();
        }
    }
    get userCompanyDetailsCssClass() {
        return this.collapsed ? 'up-user-company-details-collapsed' : 'up-user-data-container-default';
    }
    handleChevronToggle() {
        this.chevronToggled = !this.chevronToggled;
        this.toggleDropdown.emit(this.chevronToggled);
    }
    get showRightSideTemplate() {
        return this.companySwitcherTemplate && !this.showCompanySwitcher && !this.collapsed;
    }
    get chevronIcon() {
        return this.chevronToggled ? 'chevron_up_small' : 'chevron_down_small';
    }
    setHasLongCompanyName() {
        this.hasLongCompanyName = getLongestWord(this.companyName) > this.MAX_CHARACTERS_WORD_ALLOWED;
    }
}
UpSidebarHeaderComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: UpSidebarHeaderComponent, deps: [{ token: UpSidebarService }], target: i0.ɵɵFactoryTarget.Component });
UpSidebarHeaderComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.3.0", type: UpSidebarHeaderComponent, selector: "up-sidebar-header", inputs: { companyName: "companyName", companyId: "companyId", tooltip: "tooltip", companyInitials: "companyInitials", companyLocation: "companyLocation", chevronToggled: "chevronToggled", showCompanySwitcher: "showCompanySwitcher", companySwitcherTemplate: "companySwitcherTemplate" }, outputs: { toggleDropdown: "toggleDropdown" }, usesInheritance: true, usesOnChanges: true, ngImport: i0, template: "<div [ngClass]=\"userCompanyDetailsCssClass\">\n  <ng-content></ng-content>\n  <div class=\"up-user-company-details\">\n    <div class=\"company-details\" data-test=\"company-details\">\n      <h3\n        class=\"up-company-name\"\n        upTitle=\"S\"\n        data-test=\"current-company-name\"\n        [class.up-company-name--ellipses]=\"hasLongCompanyName\"\n      >\n        {{ companyName }}\n      </h3>\n      <div class=\"country-client-number-wrapper\" upMarginTop=\"1\">\n        <up-text-ellipsis\n          class=\"up-company-location\"\n          upParagraph=\"XS\"\n          data-test=\"current-company-location\"\n        >\n          {{ companyLocation }}\n        </up-text-ellipsis>\n        <div class=\"divider\" upMarginLeft=\"3\" upMarginRight=\"3\" *ngIf=\"companyId\"></div>\n        <p\n          class=\"up-company-id\"\n          *ngIf=\"companyId\"\n          [upTooltip]=\"tooltip\"\n          upParagraph=\"XS\"\n          data-test=\"current-company-id\"\n        >\n          {{ companyId }}\n        </p>\n      </div>\n      <h3 class=\"up-company-initials\" upTitle=\"S\" data-test=\"current-company-initials\">\n        {{ companyInitials }}\n      </h3>\n    </div>\n    <div *ngIf=\"showRightSideTemplate\" class=\"custom-right-side-content\">\n      <ng-container [ngTemplateOutlet]=\"companySwitcherTemplate\"></ng-container>\n    </div>\n    <div\n      *ngIf=\"showCompanySwitcher && !collapsed\"\n      class=\"up-tob-bar-chevron-container\"\n      (click)=\"handleChevronToggle()\"\n    >\n      <span class=\"icon-container\" [upIcon]=\"chevronIcon\" [color]=\"'#fff'\"></span>\n    </div>\n  </div>\n</div>\n", styles: [":host{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;width:100%;font-size:16px;padding:12px 24px;color:var(--up-white);-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:var(--up-brand-1-700)}:host .up-user-data-container-default,:host .up-user-company-details-collapsed{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-direction:row;flex-direction:row;width:100%;min-height:42px}:host .up-user-data-container-default h3.up-company-initials,:host .up-user-company-details-collapsed h3.up-company-initials{display:none}:host .up-user-data-container-default .up-tob-bar-chevron-container,:host .up-user-company-details-collapsed .up-tob-bar-chevron-container{display:-webkit-flex;display:flex}:host .up-user-data-container-default .up-company-initials,:host .up-user-company-details-collapsed .up-company-initials,:host .up-user-data-container-default .up-company-logo,:host .up-user-company-details-collapsed .up-company-logo{display:-webkit-flex;display:flex;width:36px;height:36px;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}:host .up-user-data-container-default .up-user-company-details,:host .up-user-company-details-collapsed .up-user-company-details{display:-webkit-flex;display:flex;-webkit-align-items:flex-start;align-items:flex-start;width:100%;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-between;justify-content:space-between}:host .up-user-data-container-default .up-user-company-details .company-details,:host .up-user-company-details-collapsed .up-user-company-details .company-details{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;word-break:break-word;width:100%}:host .up-user-data-container-default .up-user-company-details .company-details h3.up-company-name,:host .up-user-company-details-collapsed .up-user-company-details .company-details h3.up-company-name,:host .up-user-data-container-default .up-user-company-details .company-details h3.up-company-initials,:host .up-user-company-details-collapsed .up-user-company-details .company-details h3.up-company-initials{color:var(--up-white)}:host .up-user-data-container-default .up-user-company-details .company-details h3.up-company-name.up-company-name--ellipses,:host .up-user-company-details-collapsed .up-user-company-details .company-details h3.up-company-name.up-company-name--ellipses,:host .up-user-data-container-default .up-user-company-details .company-details h3.up-company-initials.up-company-name--ellipses,:host .up-user-company-details-collapsed .up-user-company-details .company-details h3.up-company-initials.up-company-name--ellipses{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}:host .up-user-data-container-default .up-user-company-details .company-details .country-client-number-wrapper,:host .up-user-company-details-collapsed .up-user-company-details .company-details .country-client-number-wrapper{display:-webkit-flex;display:flex;width:100%;-webkit-align-items:center;align-items:center}:host .up-user-data-container-default .up-user-company-details .company-details .up-company-location,:host .up-user-company-details-collapsed .up-user-company-details .company-details .up-company-location,:host .up-user-data-container-default .up-user-company-details .company-details p.up-company-id,:host .up-user-company-details-collapsed .up-user-company-details .company-details p.up-company-id{max-width:122px;color:var(--up-brand-1-200)}:host .up-user-data-container-default .up-user-company-details .company-details .divider,:host .up-user-company-details-collapsed .up-user-company-details .company-details .divider{background-color:var(--up-brand-1-200);height:15px;width:1px}:host .up-user-company-details-collapsed{margin-bottom:0;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}:host .up-user-company-details-collapsed h3.up-company-name,:host .up-user-company-details-collapsed p.up-company-id,:host .up-user-company-details-collapsed .up-company-location,:host .up-user-company-details-collapsed .divider{display:none}:host .up-user-company-details-collapsed h3.up-company-initials{display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}:host .up-user-company-details-collapsed .up-tob-bar-chevron-container{display:none}:host .up-tob-bar-chevron-container{margin-left:4px;cursor:pointer;height:38px;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}:host .up-tob-bar-chevron-container .icon-container{display:block;width:16px;height:16px}:host .custom-right-side-content{margin-left:4px;width:16px;height:38px;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i2.UpTitleDirective, selector: "[upTitle]", inputs: ["upTitle"] }, { kind: "directive", type: i3.UpParagraphDirective, selector: "[upParagraph]", inputs: ["upParagraph", "fontWeight"] }, { kind: "directive", type: i4.UpIconDirective, selector: "[upIcon]", inputs: ["upIcon", "fallback", "color", "width", "height"] }, { kind: "directive", type: i5.UpTooltipDirective, selector: "[upTooltip]", inputs: ["upTooltip", "trigger", "disabledTooltip", "persistOnHoverOff", "tooltipContextData", "longPress"] }, { kind: "directive", type: i6.UpMarginRightDirective, selector: "[upMarginRight]", inputs: ["upMarginRight"] }, { kind: "directive", type: i6.UpMarginTopDirective, selector: "[upMarginTop]", inputs: ["upMarginTop"] }, { kind: "directive", type: i6.UpMarginLeftDirective, selector: "[upMarginLeft]", inputs: ["upMarginLeft"] }, { kind: "component", type: i7.UpTextEllipsisComponent, selector: "up-text-ellipsis" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: UpSidebarHeaderComponent, decorators: [{
            type: Component,
            args: [{ selector: 'up-sidebar-header', template: "<div [ngClass]=\"userCompanyDetailsCssClass\">\n  <ng-content></ng-content>\n  <div class=\"up-user-company-details\">\n    <div class=\"company-details\" data-test=\"company-details\">\n      <h3\n        class=\"up-company-name\"\n        upTitle=\"S\"\n        data-test=\"current-company-name\"\n        [class.up-company-name--ellipses]=\"hasLongCompanyName\"\n      >\n        {{ companyName }}\n      </h3>\n      <div class=\"country-client-number-wrapper\" upMarginTop=\"1\">\n        <up-text-ellipsis\n          class=\"up-company-location\"\n          upParagraph=\"XS\"\n          data-test=\"current-company-location\"\n        >\n          {{ companyLocation }}\n        </up-text-ellipsis>\n        <div class=\"divider\" upMarginLeft=\"3\" upMarginRight=\"3\" *ngIf=\"companyId\"></div>\n        <p\n          class=\"up-company-id\"\n          *ngIf=\"companyId\"\n          [upTooltip]=\"tooltip\"\n          upParagraph=\"XS\"\n          data-test=\"current-company-id\"\n        >\n          {{ companyId }}\n        </p>\n      </div>\n      <h3 class=\"up-company-initials\" upTitle=\"S\" data-test=\"current-company-initials\">\n        {{ companyInitials }}\n      </h3>\n    </div>\n    <div *ngIf=\"showRightSideTemplate\" class=\"custom-right-side-content\">\n      <ng-container [ngTemplateOutlet]=\"companySwitcherTemplate\"></ng-container>\n    </div>\n    <div\n      *ngIf=\"showCompanySwitcher && !collapsed\"\n      class=\"up-tob-bar-chevron-container\"\n      (click)=\"handleChevronToggle()\"\n    >\n      <span class=\"icon-container\" [upIcon]=\"chevronIcon\" [color]=\"'#fff'\"></span>\n    </div>\n  </div>\n</div>\n", styles: [":host{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;width:100%;font-size:16px;padding:12px 24px;color:var(--up-white);-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:var(--up-brand-1-700)}:host .up-user-data-container-default,:host .up-user-company-details-collapsed{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-direction:row;flex-direction:row;width:100%;min-height:42px}:host .up-user-data-container-default h3.up-company-initials,:host .up-user-company-details-collapsed h3.up-company-initials{display:none}:host .up-user-data-container-default .up-tob-bar-chevron-container,:host .up-user-company-details-collapsed .up-tob-bar-chevron-container{display:-webkit-flex;display:flex}:host .up-user-data-container-default .up-company-initials,:host .up-user-company-details-collapsed .up-company-initials,:host .up-user-data-container-default .up-company-logo,:host .up-user-company-details-collapsed .up-company-logo{display:-webkit-flex;display:flex;width:36px;height:36px;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}:host .up-user-data-container-default .up-user-company-details,:host .up-user-company-details-collapsed .up-user-company-details{display:-webkit-flex;display:flex;-webkit-align-items:flex-start;align-items:flex-start;width:100%;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-between;justify-content:space-between}:host .up-user-data-container-default .up-user-company-details .company-details,:host .up-user-company-details-collapsed .up-user-company-details .company-details{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;word-break:break-word;width:100%}:host .up-user-data-container-default .up-user-company-details .company-details h3.up-company-name,:host .up-user-company-details-collapsed .up-user-company-details .company-details h3.up-company-name,:host .up-user-data-container-default .up-user-company-details .company-details h3.up-company-initials,:host .up-user-company-details-collapsed .up-user-company-details .company-details h3.up-company-initials{color:var(--up-white)}:host .up-user-data-container-default .up-user-company-details .company-details h3.up-company-name.up-company-name--ellipses,:host .up-user-company-details-collapsed .up-user-company-details .company-details h3.up-company-name.up-company-name--ellipses,:host .up-user-data-container-default .up-user-company-details .company-details h3.up-company-initials.up-company-name--ellipses,:host .up-user-company-details-collapsed .up-user-company-details .company-details h3.up-company-initials.up-company-name--ellipses{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}:host .up-user-data-container-default .up-user-company-details .company-details .country-client-number-wrapper,:host .up-user-company-details-collapsed .up-user-company-details .company-details .country-client-number-wrapper{display:-webkit-flex;display:flex;width:100%;-webkit-align-items:center;align-items:center}:host .up-user-data-container-default .up-user-company-details .company-details .up-company-location,:host .up-user-company-details-collapsed .up-user-company-details .company-details .up-company-location,:host .up-user-data-container-default .up-user-company-details .company-details p.up-company-id,:host .up-user-company-details-collapsed .up-user-company-details .company-details p.up-company-id{max-width:122px;color:var(--up-brand-1-200)}:host .up-user-data-container-default .up-user-company-details .company-details .divider,:host .up-user-company-details-collapsed .up-user-company-details .company-details .divider{background-color:var(--up-brand-1-200);height:15px;width:1px}:host .up-user-company-details-collapsed{margin-bottom:0;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}:host .up-user-company-details-collapsed h3.up-company-name,:host .up-user-company-details-collapsed p.up-company-id,:host .up-user-company-details-collapsed .up-company-location,:host .up-user-company-details-collapsed .divider{display:none}:host .up-user-company-details-collapsed h3.up-company-initials{display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}:host .up-user-company-details-collapsed .up-tob-bar-chevron-container{display:none}:host .up-tob-bar-chevron-container{margin-left:4px;cursor:pointer;height:38px;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}:host .up-tob-bar-chevron-container .icon-container{display:block;width:16px;height:16px}:host .custom-right-side-content{margin-left:4px;width:16px;height:38px;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}\n"] }]
        }], ctorParameters: function () { return [{ type: i8.UpSidebarService, decorators: [{
                    type: Inject,
                    args: [UpSidebarService]
                }] }]; }, propDecorators: { companyName: [{
                type: Input
            }], companyId: [{
                type: Input
            }], tooltip: [{
                type: Input
            }], companyInitials: [{
                type: Input
            }], companyLocation: [{
                type: Input
            }], chevronToggled: [{
                type: Input
            }], showCompanySwitcher: [{
                type: Input
            }], companySwitcherTemplate: [{
                type: Input
            }], toggleDropdown: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VwL2NvbXBvbmVudHMvbmF2aWdhdGlvbi9zaWRlYmFyL2NvbXBvbmVudHMvaGVhZGVyL2hlYWRlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91cC9jb21wb25lbnRzL25hdmlnYXRpb24vc2lkZWJhci9jb21wb25lbnRzL2hlYWRlci9oZWFkZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxLQUFLLEVBQ0wsTUFBTSxFQUVOLE1BQU0sRUFDTixZQUFZLEVBSWIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFFeEUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDbEUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHlEQUF5RCxDQUFDOzs7Ozs7Ozs7O0FBUXpGLE1BQU0sT0FBTyx3QkFDWCxTQUFRLHdCQUF3QjtJQW1CaEMsWUFBOEMsZ0JBQWtDO1FBQzlFLEtBQUssRUFBRSxDQUFDO1FBRG9DLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFqQmhGLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFRVCxtQkFBYyxHQUFHLEtBQUssQ0FBQztRQUN2Qix3QkFBbUIsR0FBRyxLQUFLLENBQUM7UUFFM0IsbUJBQWMsR0FBMEIsSUFBSSxZQUFZLEVBQVcsQ0FBQztRQUU5RSx1QkFBa0IsR0FBRyxLQUFLLENBQUM7UUFFbkIsZ0NBQTJCLEdBQUcsRUFBRSxDQUFDO0lBSXpDLENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLHdCQUF3QixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUMzRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxDQUNwQyxDQUFDO1FBQ0YsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1FBQ3JELElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO0lBQy9CLENBQUM7SUFFRCxXQUFXLENBQUMsT0FBc0I7UUFDaEMsSUFBSSxPQUFPLENBQUMsV0FBVyxFQUFFO1lBQ3ZCLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1NBQzlCO0lBQ0gsQ0FBQztJQUVELElBQUksMEJBQTBCO1FBQzVCLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsbUNBQW1DLENBQUMsQ0FBQyxDQUFDLGdDQUFnQyxDQUFDO0lBQ2pHLENBQUM7SUFFRCxtQkFBbUI7UUFDakIsSUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDM0MsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFFRCxJQUFJLHFCQUFxQjtRQUN2QixPQUFPLElBQUksQ0FBQyx1QkFBdUIsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDdEYsQ0FBQztJQUVELElBQUksV0FBVztRQUNiLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLG9CQUFvQixDQUFDO0lBQ3pFLENBQUM7SUFFTyxxQkFBcUI7UUFDM0IsSUFBSSxDQUFDLGtCQUFrQixHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixDQUFDO0lBQ2hHLENBQUM7O3FIQXpEVSx3QkFBd0Isa0JBb0JmLGdCQUFnQjt5R0FwQnpCLHdCQUF3QixrYkN0QnJDLDZuREErQ0E7MkZEekJhLHdCQUF3QjtrQkFMcEMsU0FBUzsrQkFDRSxtQkFBbUI7OzBCQXdCaEIsTUFBTTsyQkFBQyxnQkFBZ0I7NENBZDNCLFdBQVc7c0JBQW5CLEtBQUs7Z0JBQ0csU0FBUztzQkFBakIsS0FBSztnQkFDRyxPQUFPO3NCQUFmLEtBQUs7Z0JBQ0csZUFBZTtzQkFBdkIsS0FBSztnQkFDRyxlQUFlO3NCQUF2QixLQUFLO2dCQUNHLGNBQWM7c0JBQXRCLEtBQUs7Z0JBQ0csbUJBQW1CO3NCQUEzQixLQUFLO2dCQUNHLHVCQUF1QjtzQkFBL0IsS0FBSztnQkFDSSxjQUFjO3NCQUF2QixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgSW5qZWN0LFxuICBPbkluaXQsXG4gIE91dHB1dCxcbiAgRXZlbnRFbWl0dGVyLFxuICBUZW1wbGF0ZVJlZixcbiAgT25DaGFuZ2VzLFxuICBTaW1wbGVDaGFuZ2VzXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQXV0b1Vuc3Vic2NyaWJlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi91dGlscyc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFVwU2lkZWJhclNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9zaWRlYmFyLnNlcnZpY2UnO1xuaW1wb3J0IHsgZ2V0TG9uZ2VzdFdvcmQgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9zcmMvbGliL2hlbHBlcnMvc3RyaW5ncy9nZXQtbG9uZ2VzdC13b3JkJztcbmltcG9ydCB7IFVwSWNvbiB9IGZyb20gJy4uLy4uLy4uLy4uL2ljb25zL2xpYic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3VwLXNpZGViYXItaGVhZGVyJyxcbiAgdGVtcGxhdGVVcmw6ICdoZWFkZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnaGVhZGVyLmNvbXBvbmVudC5zYXNzJ11cbn0pXG5leHBvcnQgY2xhc3MgVXBTaWRlYmFySGVhZGVyQ29tcG9uZW50XG4gIGV4dGVuZHMgQXV0b1Vuc3Vic2NyaWJlQ29tcG9uZW50XG4gIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xuICBjb2xsYXBzZWQgPSBmYWxzZTtcbiAgc2lkZWJhclN0YXRlU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgQElucHV0KCkgY29tcGFueU5hbWU6IHN0cmluZztcbiAgQElucHV0KCkgY29tcGFueUlkOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHRvb2x0aXA6IHN0cmluZztcbiAgQElucHV0KCkgY29tcGFueUluaXRpYWxzOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvbXBhbnlMb2NhdGlvbjogc3RyaW5nO1xuICBASW5wdXQoKSBjaGV2cm9uVG9nZ2xlZCA9IGZhbHNlO1xuICBASW5wdXQoKSBzaG93Q29tcGFueVN3aXRjaGVyID0gZmFsc2U7XG4gIEBJbnB1dCgpIGNvbXBhbnlTd2l0Y2hlclRlbXBsYXRlOiBUZW1wbGF0ZVJlZjx2b2lkPjtcbiAgQE91dHB1dCgpIHRvZ2dsZURyb3Bkb3duOiBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4gPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XG5cbiAgaGFzTG9uZ0NvbXBhbnlOYW1lID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBNQVhfQ0hBUkFDVEVSU19XT1JEX0FMTE9XRUQgPSAyMDtcblxuICBjb25zdHJ1Y3RvcihASW5qZWN0KFVwU2lkZWJhclNlcnZpY2UpIHByaXZhdGUgdXBTaWRlYmFyU2VydmljZTogVXBTaWRlYmFyU2VydmljZSkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnNpZGViYXJTdGF0ZVN1YnNjcmlwdGlvbiA9IHRoaXMudXBTaWRlYmFyU2VydmljZS50b2dnbGVTaWRlYmFyLnN1YnNjcmliZShcbiAgICAgIChzdGF0ZSkgPT4gKHRoaXMuY29sbGFwc2VkID0gc3RhdGUpXG4gICAgKTtcbiAgICB0aGlzLmFkZFN1YnNjcmlwdGlvbnModGhpcy5zaWRlYmFyU3RhdGVTdWJzY3JpcHRpb24pO1xuICAgIHRoaXMuc2V0SGFzTG9uZ0NvbXBhbnlOYW1lKCk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXMuY29tcGFueU5hbWUpIHtcbiAgICAgIHRoaXMuc2V0SGFzTG9uZ0NvbXBhbnlOYW1lKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHVzZXJDb21wYW55RGV0YWlsc0Nzc0NsYXNzKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY29sbGFwc2VkID8gJ3VwLXVzZXItY29tcGFueS1kZXRhaWxzLWNvbGxhcHNlZCcgOiAndXAtdXNlci1kYXRhLWNvbnRhaW5lci1kZWZhdWx0JztcbiAgfVxuXG4gIGhhbmRsZUNoZXZyb25Ub2dnbGUoKTogdm9pZCB7XG4gICAgdGhpcy5jaGV2cm9uVG9nZ2xlZCA9ICF0aGlzLmNoZXZyb25Ub2dnbGVkO1xuICAgIHRoaXMudG9nZ2xlRHJvcGRvd24uZW1pdCh0aGlzLmNoZXZyb25Ub2dnbGVkKTtcbiAgfVxuXG4gIGdldCBzaG93UmlnaHRTaWRlVGVtcGxhdGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29tcGFueVN3aXRjaGVyVGVtcGxhdGUgJiYgIXRoaXMuc2hvd0NvbXBhbnlTd2l0Y2hlciAmJiAhdGhpcy5jb2xsYXBzZWQ7XG4gIH1cblxuICBnZXQgY2hldnJvbkljb24oKTogVXBJY29uWyduYW1lJ10ge1xuICAgIHJldHVybiB0aGlzLmNoZXZyb25Ub2dnbGVkID8gJ2NoZXZyb25fdXBfc21hbGwnIDogJ2NoZXZyb25fZG93bl9zbWFsbCc7XG4gIH1cblxuICBwcml2YXRlIHNldEhhc0xvbmdDb21wYW55TmFtZSgpIHtcbiAgICB0aGlzLmhhc0xvbmdDb21wYW55TmFtZSA9IGdldExvbmdlc3RXb3JkKHRoaXMuY29tcGFueU5hbWUpID4gdGhpcy5NQVhfQ0hBUkFDVEVSU19XT1JEX0FMTE9XRUQ7XG4gIH1cbn1cbiIsIjxkaXYgW25nQ2xhc3NdPVwidXNlckNvbXBhbnlEZXRhaWxzQ3NzQ2xhc3NcIj5cbiAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICA8ZGl2IGNsYXNzPVwidXAtdXNlci1jb21wYW55LWRldGFpbHNcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY29tcGFueS1kZXRhaWxzXCIgZGF0YS10ZXN0PVwiY29tcGFueS1kZXRhaWxzXCI+XG4gICAgICA8aDNcbiAgICAgICAgY2xhc3M9XCJ1cC1jb21wYW55LW5hbWVcIlxuICAgICAgICB1cFRpdGxlPVwiU1wiXG4gICAgICAgIGRhdGEtdGVzdD1cImN1cnJlbnQtY29tcGFueS1uYW1lXCJcbiAgICAgICAgW2NsYXNzLnVwLWNvbXBhbnktbmFtZS0tZWxsaXBzZXNdPVwiaGFzTG9uZ0NvbXBhbnlOYW1lXCJcbiAgICAgID5cbiAgICAgICAge3sgY29tcGFueU5hbWUgfX1cbiAgICAgIDwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiY291bnRyeS1jbGllbnQtbnVtYmVyLXdyYXBwZXJcIiB1cE1hcmdpblRvcD1cIjFcIj5cbiAgICAgICAgPHVwLXRleHQtZWxsaXBzaXNcbiAgICAgICAgICBjbGFzcz1cInVwLWNvbXBhbnktbG9jYXRpb25cIlxuICAgICAgICAgIHVwUGFyYWdyYXBoPVwiWFNcIlxuICAgICAgICAgIGRhdGEtdGVzdD1cImN1cnJlbnQtY29tcGFueS1sb2NhdGlvblwiXG4gICAgICAgID5cbiAgICAgICAgICB7eyBjb21wYW55TG9jYXRpb24gfX1cbiAgICAgICAgPC91cC10ZXh0LWVsbGlwc2lzPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGl2aWRlclwiIHVwTWFyZ2luTGVmdD1cIjNcIiB1cE1hcmdpblJpZ2h0PVwiM1wiICpuZ0lmPVwiY29tcGFueUlkXCI+PC9kaXY+XG4gICAgICAgIDxwXG4gICAgICAgICAgY2xhc3M9XCJ1cC1jb21wYW55LWlkXCJcbiAgICAgICAgICAqbmdJZj1cImNvbXBhbnlJZFwiXG4gICAgICAgICAgW3VwVG9vbHRpcF09XCJ0b29sdGlwXCJcbiAgICAgICAgICB1cFBhcmFncmFwaD1cIlhTXCJcbiAgICAgICAgICBkYXRhLXRlc3Q9XCJjdXJyZW50LWNvbXBhbnktaWRcIlxuICAgICAgICA+XG4gICAgICAgICAge3sgY29tcGFueUlkIH19XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwidXAtY29tcGFueS1pbml0aWFsc1wiIHVwVGl0bGU9XCJTXCIgZGF0YS10ZXN0PVwiY3VycmVudC1jb21wYW55LWluaXRpYWxzXCI+XG4gICAgICAgIHt7IGNvbXBhbnlJbml0aWFscyB9fVxuICAgICAgPC9oMz5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2ICpuZ0lmPVwic2hvd1JpZ2h0U2lkZVRlbXBsYXRlXCIgY2xhc3M9XCJjdXN0b20tcmlnaHQtc2lkZS1jb250ZW50XCI+XG4gICAgICA8bmctY29udGFpbmVyIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImNvbXBhbnlTd2l0Y2hlclRlbXBsYXRlXCI+PC9uZy1jb250YWluZXI+XG4gICAgPC9kaXY+XG4gICAgPGRpdlxuICAgICAgKm5nSWY9XCJzaG93Q29tcGFueVN3aXRjaGVyICYmICFjb2xsYXBzZWRcIlxuICAgICAgY2xhc3M9XCJ1cC10b2ItYmFyLWNoZXZyb24tY29udGFpbmVyXCJcbiAgICAgIChjbGljayk9XCJoYW5kbGVDaGV2cm9uVG9nZ2xlKClcIlxuICAgID5cbiAgICAgIDxzcGFuIGNsYXNzPVwiaWNvbi1jb250YWluZXJcIiBbdXBJY29uXT1cImNoZXZyb25JY29uXCIgW2NvbG9yXT1cIicjZmZmJ1wiPjwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==
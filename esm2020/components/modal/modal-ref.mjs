import { Subject } from 'rxjs';
import { KeyboardKeysEnum, SubscriptionManager } from '../../src/lib/utils';
export class ModalRef extends SubscriptionManager {
    constructor(overlay, content, data, config) {
        super();
        this.overlay = overlay;
        this.content = content;
        this.data = data;
        this.config = config;
        this.afterClosed$ = new Subject();
        this.active = true;
        this.close = (result) => {
            this.active = false;
            this.overlay.dispose();
            this.afterClosed$.next(result);
            this.afterClosed$.complete();
            this.unsubscribeAll();
        };
        if (config.staticBackdrop) {
            return;
        }
        this.addSubscriptions(overlay.backdropClick().subscribe(() => this.close()), overlay.keydownEvents().subscribe((keydownEvent) => {
            if (keydownEvent.key === KeyboardKeysEnum.Escape) {
                this.close();
            }
        }));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kYWwtcmVmLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdXAvY29tcG9uZW50cy9tb2RhbC9tb2RhbC1yZWYudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQU81RSxNQUFNLE9BQU8sUUFBZ0QsU0FBUSxtQkFBbUI7SUFLdEYsWUFDUyxPQUFtQixFQUNuQixPQUE0QixFQUM1QixJQUFRLEVBQ1IsTUFBc0I7UUFFN0IsS0FBSyxFQUFFLENBQUM7UUFMRCxZQUFPLEdBQVAsT0FBTyxDQUFZO1FBQ25CLFlBQU8sR0FBUCxPQUFPLENBQXFCO1FBQzVCLFNBQUksR0FBSixJQUFJLENBQUk7UUFDUixXQUFNLEdBQU4sTUFBTSxDQUFnQjtRQVIvQixpQkFBWSxHQUFHLElBQUksT0FBTyxFQUFpQixDQUFDO1FBQzVDLFdBQU0sR0FBRyxJQUFJLENBQUM7UUF1QmQsVUFBSyxHQUFHLENBQUMsTUFBVSxFQUFRLEVBQUU7WUFDM0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDcEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN2QixJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMvQixJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzdCLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN4QixDQUFDLENBQUM7UUFuQkEsSUFBSSxNQUFNLENBQUMsY0FBYyxFQUFFO1lBQ3pCLE9BQU87U0FDUjtRQUNELElBQUksQ0FBQyxnQkFBZ0IsQ0FDbkIsT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsRUFDckQsT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFlBQTJCLEVBQUUsRUFBRTtZQUNoRSxJQUFJLFlBQVksQ0FBQyxHQUFHLEtBQUssZ0JBQWdCLENBQUMsTUFBTSxFQUFFO2dCQUNoRCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7YUFDZDtRQUNILENBQUMsQ0FBQyxDQUNILENBQUM7SUFDSixDQUFDO0NBU0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZW1wbGF0ZVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tcG9uZW50VHlwZSwgT3ZlcmxheVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9vdmVybGF5JztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEtleWJvYXJkS2V5c0VudW0sIFN1YnNjcmlwdGlvbk1hbmFnZXIgfSBmcm9tICcuLi8uLi9zcmMvbGliL3V0aWxzJztcblxuaW1wb3J0IHsgVXBNb2RhbENvbmZpZyB9IGZyb20gJy4vbW9kYWwuc2VydmljZSc7XG5pbXBvcnQgeyBVcE1vZGFsQ29tcG9uZW50IH0gZnJvbSAnLi9tb2RhbC5jb21wb25lbnQnO1xuXG5leHBvcnQgdHlwZSBNb2RhbENvbnRlbnRUeXBlPFQ+ID0gVGVtcGxhdGVSZWY8VD4gfCBDb21wb25lbnRUeXBlPFQ+O1xuXG5leHBvcnQgY2xhc3MgTW9kYWxSZWY8VCA9IHVua25vd24sIEQgPSB1bmtub3duLCBSID0gdW5rbm93bj4gZXh0ZW5kcyBTdWJzY3JpcHRpb25NYW5hZ2VyIHtcbiAgYWZ0ZXJDbG9zZWQkID0gbmV3IFN1YmplY3Q8UiB8IHVuZGVmaW5lZD4oKTtcbiAgYWN0aXZlID0gdHJ1ZTtcbiAgY29tcG9uZW50SW5zdGFuY2U6IFVwTW9kYWxDb21wb25lbnQ8VCwgRCwgUj47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIG92ZXJsYXk6IE92ZXJsYXlSZWYsXG4gICAgcHVibGljIGNvbnRlbnQ6IE1vZGFsQ29udGVudFR5cGU8VD4sXG4gICAgcHVibGljIGRhdGE/OiBELFxuICAgIHB1YmxpYyBjb25maWc/OiBVcE1vZGFsQ29uZmlnXG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgaWYgKGNvbmZpZy5zdGF0aWNCYWNrZHJvcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmFkZFN1YnNjcmlwdGlvbnMoXG4gICAgICBvdmVybGF5LmJhY2tkcm9wQ2xpY2soKS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jbG9zZSgpKSxcbiAgICAgIG92ZXJsYXkua2V5ZG93bkV2ZW50cygpLnN1YnNjcmliZSgoa2V5ZG93bkV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChrZXlkb3duRXZlbnQua2V5ID09PSBLZXlib2FyZEtleXNFbnVtLkVzY2FwZSkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgY2xvc2UgPSAocmVzdWx0PzogUik6IHZvaWQgPT4ge1xuICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5vdmVybGF5LmRpc3Bvc2UoKTtcbiAgICB0aGlzLmFmdGVyQ2xvc2VkJC5uZXh0KHJlc3VsdCk7XG4gICAgdGhpcy5hZnRlckNsb3NlZCQuY29tcGxldGUoKTtcbiAgICB0aGlzLnVuc3Vic2NyaWJlQWxsKCk7XG4gIH07XG59XG4iXX0=
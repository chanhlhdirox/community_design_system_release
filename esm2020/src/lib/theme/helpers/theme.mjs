import tinycolor from 'tinycolor2';
import { BackgroundColorNames, Brand1VariantsColorNames, Brand3VariantsColorNames, BrandColorNames, ChoiceSelectorsColorNames, GraphicsColorNames, IconColorNames, InputColorNames, NavigationSidebarColorNames, NegativeVariantsColorNames, NeutralVariantsColorNames, TextColorNames, WarningVariantsColorNames } from '../enums';
import { DefaultNegativeVariants } from '../defaults/negative-variants';
import { DefaultNeutralVariants } from '../defaults/neutrals-variants';
import { DefaultWarningVariants } from '../defaults/warning-variants';
import { DefaultPositiveVariants } from '../defaults/positive-variants';
import { setCSS3Variables } from '../../helpers/css3';
import { DefaultSpacingConfiguration } from '../defaults/spacing-configuration';
export const applyDesignSystemTheme = (overrides) => {
    const theme = computeColors(overrides);
    setCSS3Variables(theme);
    return theme;
};
export const computeColors = (overrides = {}) => {
    const brand1 = overrides[BrandColorNames.upBrand1];
    const brand3 = overrides[BrandColorNames.upBrand3];
    const brand1Variants = generateBrand1Variants(brand1);
    const brand3Variants = generateBrand3Variants(brand3);
    const brand2 = overrides[BrandColorNames.upBrand2] ||
        overrides[Brand1VariantsColorNames.upBrand1_900] ||
        brand1Variants[Brand1VariantsColorNames.upBrand1_900];
    const theme = {
        [BrandColorNames.upBrand1]: brand1,
        [BrandColorNames.upBrand2]: brand2,
        [BrandColorNames.upBrand3]: brand3,
        ...brand1Variants,
        ...brand3Variants,
        ...DefaultNegativeVariants,
        ...DefaultNeutralVariants,
        ...DefaultWarningVariants,
        ...DefaultPositiveVariants,
        ...DefaultSpacingConfiguration
    };
    return {
        ...theme,
        ...generateTextColors(theme),
        ...generateChoiceSelectorsColors(theme),
        ...generateInputColors(theme),
        ...generateBackgroundColors(theme),
        ...generateGraphicsColors(theme),
        ...generateIconColors(theme),
        ...generateNavigationSidebarColors(theme),
        ...overrides
    };
};
const generateBrand1Variants = (color) => {
    return generateColorVariants(color, BrandColorNames.upBrand1);
};
const generateBrand3Variants = (color) => {
    return generateColorVariants(color, BrandColorNames.upBrand3);
};
const generateColorVariants = (color, prefix) => {
    const baseLight = tinycolor('#fff');
    const baseDark = getBaseDark(tinycolor(color).toRgb());
    return {
        [generateColorVariantKey(prefix, 50)]: `#${tinycolor.mix(baseLight, color, 12).toHex()}`,
        [generateColorVariantKey(prefix, 100)]: `#${tinycolor.mix(baseLight, color, 30).toHex()}`,
        [generateColorVariantKey(prefix, 200)]: `#${tinycolor.mix(baseLight, color, 50).toHex()}`,
        [generateColorVariantKey(prefix, 300)]: `#${tinycolor.mix(baseLight, color, 70).toHex()}`,
        [generateColorVariantKey(prefix, 400)]: `#${tinycolor.mix(baseLight, color, 85).toHex()}`,
        [generateColorVariantKey(prefix, 500)]: `#${tinycolor.mix(baseLight, color, 100).toHex()}`,
        [generateColorVariantKey(prefix, 600)]: `#${tinycolor.mix(baseDark, color, 87).toHex()}`,
        [generateColorVariantKey(prefix, 700)]: `#${tinycolor.mix(baseDark, color, 70).toHex()}`,
        [generateColorVariantKey(prefix, 800)]: `#${tinycolor.mix(baseDark, color, 54).toHex()}`,
        [generateColorVariantKey(prefix, 900)]: `#${tinycolor.mix(baseDark, color, 25).toHex()}`
    };
};
const generateTextColors = (theme) => {
    return {
        [TextColorNames.upCoreTxt]: theme[NeutralVariantsColorNames.upNeutral_900],
        [TextColorNames.upDeemphasisedTxt1]: theme[NeutralVariantsColorNames.upNeutral_700],
        [TextColorNames.upDeemphasisedTxt2]: theme[NeutralVariantsColorNames.upNeutral_500],
        [TextColorNames.upCoreTxtInverted]: theme[NeutralVariantsColorNames.upWhite],
        [TextColorNames.upDeemphasisedTxtInverted1]: theme[Brand1VariantsColorNames.upBrand1_200],
        [TextColorNames.upDeemphasisedTxtInverted2]: theme[Brand1VariantsColorNames.upBrand1_400]
    };
};
const generateInputColors = (theme) => {
    return {
        [InputColorNames.upInputLabel]: theme[NeutralVariantsColorNames.upNeutral_900],
        [InputColorNames.upInputLabelFocus]: theme[Brand1VariantsColorNames.upBrand1_700],
        [InputColorNames.upInputLabelHover]: theme[NeutralVariantsColorNames.upNeutral_900],
        [InputColorNames.upInputFocus]: theme[Brand1VariantsColorNames.upBrand1_500],
        [InputColorNames.upInputPlaceholder]: theme[NeutralVariantsColorNames.upNeutral_700],
        [InputColorNames.upInputTxt]: theme[NeutralVariantsColorNames.upNeutral_900],
        [InputColorNames.upInputTxtDisabled]: theme[NeutralVariantsColorNames.upNeutral_700],
        [InputColorNames.upInputHelperTxt]: theme[NeutralVariantsColorNames.upNeutral_700],
        [InputColorNames.upInputHoverBorder]: theme[NeutralVariantsColorNames.upNeutral_900],
        [InputColorNames.upInputHelperTxtError]: theme[NegativeVariantsColorNames.upNegative_700],
        [InputColorNames.upInputBorder]: theme[NeutralVariantsColorNames.upNeutral_400],
        [InputColorNames.upInputBorderHover]: theme[Brand3VariantsColorNames.upBrand3_400],
        [InputColorNames.upInputBorderFocus]: theme[Brand1VariantsColorNames.upBrand1_200],
        [InputColorNames.upInputBorderError]: theme[NegativeVariantsColorNames.upNegative_400],
        [InputColorNames.upInputBorderWarning]: theme[WarningVariantsColorNames.upWarning_400],
        [InputColorNames.upInputDisabled]: theme[NeutralVariantsColorNames.upNeutral_400],
        [InputColorNames.upCaret]: theme[Brand3VariantsColorNames.upBrand3_400],
        [InputColorNames.upInputWarningTxtError]: theme[WarningVariantsColorNames.upWarning_700]
    };
};
const generateChoiceSelectorsColors = (theme) => {
    return {
        [ChoiceSelectorsColorNames.upChoiceSelectorLabel]: theme[NeutralVariantsColorNames.upNeutral_900],
        [ChoiceSelectorsColorNames.upChoiceSelectorLabelDisabled]: theme[NeutralVariantsColorNames.upNeutral_700],
        [ChoiceSelectorsColorNames.upChoiceSelector]: theme[Brand1VariantsColorNames.upBrand1_500],
        [ChoiceSelectorsColorNames.upChoiceSelectorReadonly]: theme[NeutralVariantsColorNames.upNeutral_500],
        [ChoiceSelectorsColorNames.upSwitchThumbOn]: theme[Brand1VariantsColorNames.upBrand1_500],
        [ChoiceSelectorsColorNames.upSwitchTrackOn]: theme[Brand1VariantsColorNames.upBrand1_200],
        [ChoiceSelectorsColorNames.upSwitchThumbOff]: theme[NeutralVariantsColorNames.upNeutral_900],
        [ChoiceSelectorsColorNames.upSwitchTrackOff]: theme[NeutralVariantsColorNames.upNeutral_500],
        [ChoiceSelectorsColorNames.upSwitchThumbDisabled]: theme[NeutralVariantsColorNames.upNeutral_500],
        [ChoiceSelectorsColorNames.upSwitchTrackDisabled]: theme[NeutralVariantsColorNames.upNeutral_400]
    };
};
const generateBackgroundColors = (theme) => {
    return {
        [BackgroundColorNames.upBg]: theme[NeutralVariantsColorNames.upWhite],
        [BackgroundColorNames.upBgDark]: theme[BrandColorNames.upBrand2],
        [BackgroundColorNames.upBgDarkOffset1]: theme[Brand1VariantsColorNames.upBrand1_600],
        [BackgroundColorNames.upBgDarkOffset2]: theme[Brand1VariantsColorNames.upBrand1_400],
        [BackgroundColorNames.upBgDarkOffset3]: theme[Brand1VariantsColorNames.upBrand1_200]
    };
};
const generateGraphicsColors = (theme) => {
    return {
        [GraphicsColorNames.upDividerDark]: theme[Brand1VariantsColorNames.upBrand1_400]
    };
};
const generateIconColors = (theme) => {
    return {
        [IconColorNames.upIc]: theme[NeutralVariantsColorNames.upNeutral_900],
        [IconColorNames.upIcDeemphasised]: theme[NeutralVariantsColorNames.upNeutral_700],
        [IconColorNames.upIcDestructive]: theme[NegativeVariantsColorNames.upNegative_400]
    };
};
const generateNavigationSidebarColors = (theme) => {
    return {
        [NavigationSidebarColorNames.upNavLink]: theme[Brand1VariantsColorNames.upBrand1_200],
        [NavigationSidebarColorNames.upNavLinkHover]: theme[Brand3VariantsColorNames.upBrand3_400],
        [NavigationSidebarColorNames.upNavLinkActive]: theme[NeutralVariantsColorNames.upWhite],
        [NavigationSidebarColorNames.upNavLinkBgActive]: theme[Brand1VariantsColorNames.upBrand1_600]
    };
};
const generateColorVariantKey = (color, variant) => {
    return `${color}-${variant}`;
};
const getBaseDark = (color) => {
    const b = Math.floor((color.b * color.b) / 255);
    const r = Math.floor((color.r * color.r) / 255);
    const g = Math.floor((color.g * color.g) / 255);
    return tinycolor({ r, g, b });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhlbWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91cC9zcmMvbGliL3RoZW1lL2hlbHBlcnMvdGhlbWUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxTQUFTLE1BQU0sWUFBWSxDQUFDO0FBa0JuQyxPQUFPLEVBQ0wsb0JBQW9CLEVBQ3BCLHdCQUF3QixFQUN4Qix3QkFBd0IsRUFDeEIsZUFBZSxFQUNmLHlCQUF5QixFQUN6QixrQkFBa0IsRUFDbEIsY0FBYyxFQUNkLGVBQWUsRUFDZiwyQkFBMkIsRUFDM0IsMEJBQTBCLEVBQzFCLHlCQUF5QixFQUN6QixjQUFjLEVBQ2QseUJBQXlCLEVBQzFCLE1BQU0sVUFBVSxDQUFDO0FBQ2xCLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ3hFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ3RFLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ3hFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3RELE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBRWhGLE1BQU0sQ0FBQyxNQUFNLHNCQUFzQixHQUFHLENBQ3BDLFNBQXNDLEVBQ25CLEVBQUU7SUFDckIsTUFBTSxLQUFLLEdBQUcsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3ZDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3hCLE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFHLENBQUMsWUFBd0MsRUFBRSxFQUFxQixFQUFFO0lBQzdGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxlQUFl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QywyQkFBMkIsQ0FBQyxlQUFlLENBQUMsRUFBRSxLQUFLLENBQUMseUJBQXlCLENBQUMsT0FBTyxDQUFDO1FBQ3ZGLENBQUMsMkJBQTJCLENBQUMsaUJBQWlCLENBQUMsRUFBRSxLQUFLLENBQUMsd0JBQXdCLENBQUMsWUFBWSxDQUFDO0tBQzlGLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRixNQUFNLHVCQUF1QixHQUFHLENBQUMsS0FBc0IsRUFBRSxPQUFxQixFQUFFLEVBQUU7SUFDaEYsT0FBTyxHQUFHLEtBQUssSUFBSSxPQUFPLEVBQUUsQ0FBQztBQUMvQixDQUFDLENBQUM7QUFFRixNQUFNLFdBQVcsR0FBRyxDQUFDLEtBQWUsRUFBRSxFQUFFO0lBQ3RDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUNoRCxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDaEQsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQ2hELE9BQU8sU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2hDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0aW55Y29sb3IgZnJvbSAndGlueWNvbG9yMic7XG5cbmltcG9ydCB7XG4gIFRoZW1lQ29sb3JzT2JqZWN0LFxuICBDb2xvclZhcmlhbnQsXG4gIEhleENvbG9yLFxuICBSZ2JDb2xvcixcbiAgVGhlbWVCcmFuZDFWYXJpYW50c0NvbG9ycyxcbiAgVGhlbWVCcmFuZDNWYXJpYW50c0NvbG9ycyxcbiAgVGhlbWVUZXh0Q29sb3JzLFxuICBUaGVtZUlucHV0Q29sb3JzLFxuICBUaGVtZUNob2ljZVNlbGVjdG9yQ29sb3JzLFxuICBUaGVtZUJhY2tncm91bmRDb2xvcnMsXG4gIFRoZW1lR3JhcGhpY3NDb2xvcnMsXG4gIFRoZW1lSWNvbkNvbG9ycyxcbiAgVGhlbWVOYXZpZ2F0aW9uU2lkZWJhckNvbG9ycyxcbiAgRGVzaWduU3lzdGVtVGhlbWVQYXJhbWV0ZXJzXG59IGZyb20gJy4uL2ludGVyZmFjZXMnO1xuaW1wb3J0IHtcbiAgQmFja2dyb3VuZENvbG9yTmFtZXMsXG4gIEJyYW5kMVZhcmlhbnRzQ29sb3JOYW1lcyxcbiAgQnJhbmQzVmFyaWFudHNDb2xvck5hbWVzLFxuICBCcmFuZENvbG9yTmFtZXMsXG4gIENob2ljZVNlbGVjdG9yc0NvbG9yTmFtZXMsXG4gIEdyYXBoaWNzQ29sb3JOYW1lcyxcbiAgSWNvbkNvbG9yTmFtZXMsXG4gIElucHV0Q29sb3JOYW1lcyxcbiAgTmF2aWdhdGlvblNpZGViYXJDb2xvck5hbWVzLFxuICBOZWdhdGl2ZVZhcmlhbnRzQ29sb3JOYW1lcyxcbiAgTmV1dHJhbFZhcmlhbnRzQ29sb3JOYW1lcyxcbiAgVGV4dENvbG9yTmFtZXMsXG4gIFdhcm5pbmdWYXJpYW50c0NvbG9yTmFtZXNcbn0gZnJvbSAnLi4vZW51bXMnO1xuaW1wb3J0IHsgRGVmYXVsdE5lZ2F0aXZlVmFyaWFudHMgfSBmcm9tICcuLi9kZWZhdWx0cy9uZWdhdGl2ZS12YXJpYW50cyc7XG5pbXBvcnQgeyBEZWZhdWx0TmV1dHJhbFZhcmlhbnRzIH0gZnJvbSAnLi4vZGVmYXVsdHMvbmV1dHJhbHMtdmFyaWFudHMnO1xuaW1wb3J0IHsgRGVmYXVsdFdhcm5pbmdWYXJpYW50cyB9IGZyb20gJy4uL2RlZmF1bHRzL3dhcm5pbmctdmFyaWFudHMnO1xuaW1wb3J0IHsgRGVmYXVsdFBvc2l0aXZlVmFyaWFudHMgfSBmcm9tICcuLi9kZWZhdWx0cy9wb3NpdGl2ZS12YXJpYW50cyc7XG5pbXBvcnQgeyBzZXRDU1MzVmFyaWFibGVzIH0gZnJvbSAnLi4vLi4vaGVscGVycy9jc3MzJztcbmltcG9ydCB7IERlZmF1bHRTcGFjaW5nQ29uZmlndXJhdGlvbiB9IGZyb20gJy4uL2RlZmF1bHRzL3NwYWNpbmctY29uZmlndXJhdGlvbic7XG5cbmV4cG9ydCBjb25zdCBhcHBseURlc2lnblN5c3RlbVRoZW1lID0gKFxuICBvdmVycmlkZXM6IERlc2lnblN5c3RlbVRoZW1lUGFyYW1ldGVyc1xuKTogVGhlbWVDb2xvcnNPYmplY3QgPT4ge1xuICBjb25zdCB0aGVtZSA9IGNvbXB1dGVDb2xvcnMob3ZlcnJpZGVzKTtcbiAgc2V0Q1NTM1ZhcmlhYmxlcyh0aGVtZSk7XG4gIHJldHVybiB0aGVtZTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb21wdXRlQ29sb3JzID0gKG92ZXJyaWRlczogUGFydGlhbDxUaGVtZUNvbG9yc09iamVjdD4gPSB7fSk6IFRoZW1lQ29sb3JzT2JqZWN0ID0+IHtcbiAgY29uc3QgYnJhbmQxID0gb3ZlcnJpZGVzW0JyYW5kQ29sb3JOYW1lcy51cEJyYW5kMV07XG4gIGNvbnN0IGJyYW5kMyA9IG92ZXJyaWRlc1tCcmFuZENvbG9yTmFtZXMudXBCcmFuZDNdO1xuXG4gIGNvbnN0IGJyYW5kMVZhcmlhbnRzID0gZ2VuZXJhdGVCcmFuZDFWYXJpYW50cyhicmFuZDEpO1xuICBjb25zdCBicmFuZDNWYXJpYW50cyA9IGdlbmVyYXRlQnJhbmQzVmFyaWFudHMoYnJhbmQzKTtcblxuICBjb25zdCBicmFuZDIgPVxuICAgIG92ZXJyaWRlc1tCcmFuZENvbG9yTmFtZXMudXBCcmFuZDJdIHx8XG4gICAgb3ZlcnJpZGVzW0JyYW5kMVZhcmlhbnRzQ29sb3JOYW1lcy51cEJyYW5kMV85MDBdIHx8XG4gICAgYnJhbmQxVmFyaWFudHNbQnJhbmQxVmFyaWFudHNDb2xvck5hbWVzLnVwQnJhbmQxXzkwMF07XG5cbiAgY29uc3QgdGhlbWUgPSB7XG4gICAgW0JyYW5kQ29sb3JOYW1lcy51cEJyYW5kMV06IGJyYW5kMSxcbiAgICBbQnJhbmRDb2xvck5hbWVzLnVwQnJhbmQyXTogYnJhbmQyLFxuICAgIFtCcmFuZENvbG9yTmFtZXMudXBCcmFuZDNdOiBicmFuZDMsXG4gICAgLi4uYnJhbmQxVmFyaWFudHMsXG4gICAgLi4uYnJhbmQzVmFyaWFudHMsXG4gICAgLi4uRGVmYXVsdE5lZ2F0aXZlVmFyaWFudHMsXG4gICAgLi4uRGVmYXVsdE5ldXRyYWxWYXJpYW50cyxcbiAgICAuLi5EZWZhdWx0V2FybmluZ1ZhcmlhbnRzLFxuICAgIC4uLkRlZmF1bHRQb3NpdGl2ZVZhcmlhbnRzLFxuICAgIC4uLkRlZmF1bHRTcGFjaW5nQ29uZmlndXJhdGlvblxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgLi4udGhlbWUsXG4gICAgLi4uZ2VuZXJhdGVUZXh0Q29sb3JzKHRoZW1lKSxcbiAgICAuLi5nZW5lcmF0ZUNob2ljZVNlbGVjdG9yc0NvbG9ycyh0aGVtZSksXG4gICAgLi4uZ2VuZXJhdGVJbnB1dENvbG9ycyh0aGVtZSksXG4gICAgLi4uZ2VuZXJhdGVCYWNrZ3JvdW5kQ29sb3JzKHRoZW1lKSxcbiAgICAuLi5nZW5lcmF0ZUdyYXBoaWNzQ29sb3JzKHRoZW1lKSxcbiAgICAuLi5nZW5lcmF0ZUljb25Db2xvcnModGhlbWUpLFxuICAgIC4uLmdlbmVyYXRlTmF2aWdhdGlvblNpZGViYXJDb2xvcnModGhlbWUpLFxuICAgIC4uLm92ZXJyaWRlc1xuICB9O1xufTtcblxuY29uc3QgZ2VuZXJhdGVCcmFuZDFWYXJpYW50cyA9IChjb2xvcjogSGV4Q29sb3IpOiBUaGVtZUJyYW5kMVZhcmlhbnRzQ29sb3JzID0+IHtcbiAgcmV0dXJuIGdlbmVyYXRlQ29sb3JWYXJpYW50cyhjb2xvciwgQnJhbmRDb2xvck5hbWVzLnVwQnJhbmQxKSBhcyBUaGVtZUJyYW5kMVZhcmlhbnRzQ29sb3JzO1xufTtcblxuY29uc3QgZ2VuZXJhdGVCcmFuZDNWYXJpYW50cyA9IChjb2xvcjogSGV4Q29sb3IpOiBUaGVtZUJyYW5kM1ZhcmlhbnRzQ29sb3JzID0+IHtcbiAgcmV0dXJuIGdlbmVyYXRlQ29sb3JWYXJpYW50cyhjb2xvciwgQnJhbmRDb2xvck5hbWVzLnVwQnJhbmQzKSBhcyBUaGVtZUJyYW5kM1ZhcmlhbnRzQ29sb3JzO1xufTtcblxuY29uc3QgZ2VuZXJhdGVDb2xvclZhcmlhbnRzID0gKFxuICBjb2xvcjogSGV4Q29sb3IsXG4gIHByZWZpeDogQnJhbmRDb2xvck5hbWVzXG4pOiBQYXJ0aWFsPFRoZW1lQ29sb3JzT2JqZWN0PiA9PiB7XG4gIGNvbnN0IGJhc2VMaWdodCA9IHRpbnljb2xvcignI2ZmZicpO1xuICBjb25zdCBiYXNlRGFyayA9IGdldEJhc2VEYXJrKHRpbnljb2xvcihjb2xvcikudG9SZ2IoKSk7XG5cbiAgcmV0dXJuIHtcbiAgICBbZ2VuZXJhdGVDb2xvclZhcmlhbnRLZXkocHJlZml4LCA1MCldOiBgIyR7dGlueWNvbG9yLm1peChiYXNlTGlnaHQsIGNvbG9yLCAxMikudG9IZXgoKX1gLFxuICAgIFtnZW5lcmF0ZUNvbG9yVmFyaWFudEtleShwcmVmaXgsIDEwMCldOiBgIyR7dGlueWNvbG9yLm1peChiYXNlTGlnaHQsIGNvbG9yLCAzMCkudG9IZXgoKX1gLFxuICAgIFtnZW5lcmF0ZUNvbG9yVmFyaWFudEtleShwcmVmaXgsIDIwMCldOiBgIyR7dGlueWNvbG9yLm1peChiYXNlTGlnaHQsIGNvbG9yLCA1MCkudG9IZXgoKX1gLFxuICAgIFtnZW5lcmF0ZUNvbG9yVmFyaWFudEtleShwcmVmaXgsIDMwMCldOiBgIyR7dGlueWNvbG9yLm1peChiYXNlTGlnaHQsIGNvbG9yLCA3MCkudG9IZXgoKX1gLFxuICAgIFtnZW5lcmF0ZUNvbG9yVmFyaWFudEtleShwcmVmaXgsIDQwMCldOiBgIyR7dGlueWNvbG9yLm1peChiYXNlTGlnaHQsIGNvbG9yLCA4NSkudG9IZXgoKX1gLFxuICAgIFtnZW5lcmF0ZUNvbG9yVmFyaWFudEtleShwcmVmaXgsIDUwMCldOiBgIyR7dGlueWNvbG9yLm1peChiYXNlTGlnaHQsIGNvbG9yLCAxMDApLnRvSGV4KCl9YCxcbiAgICBbZ2VuZXJhdGVDb2xvclZhcmlhbnRLZXkocHJlZml4LCA2MDApXTogYCMke3Rpbnljb2xvci5taXgoYmFzZURhcmssIGNvbG9yLCA4NykudG9IZXgoKX1gLFxuICAgIFtnZW5lcmF0ZUNvbG9yVmFyaWFudEtleShwcmVmaXgsIDcwMCldOiBgIyR7dGlueWNvbG9yLm1peChiYXNlRGFyaywgY29sb3IsIDcwKS50b0hleCgpfWAsXG4gICAgW2dlbmVyYXRlQ29sb3JWYXJpYW50S2V5KHByZWZpeCwgODAwKV06IGAjJHt0aW55Y29sb3IubWl4KGJhc2VEYXJrLCBjb2xvciwgNTQpLnRvSGV4KCl9YCxcbiAgICBbZ2VuZXJhdGVDb2xvclZhcmlhbnRLZXkocHJlZml4LCA5MDApXTogYCMke3Rpbnljb2xvci5taXgoYmFzZURhcmssIGNvbG9yLCAyNSkudG9IZXgoKX1gXG4gIH0gYXMgUGFydGlhbDxUaGVtZUNvbG9yc09iamVjdD47XG59O1xuXG5jb25zdCBnZW5lcmF0ZVRleHRDb2xvcnMgPSAodGhlbWU6IFBhcnRpYWw8VGhlbWVDb2xvcnNPYmplY3Q+KTogVGhlbWVUZXh0Q29sb3JzID0+IHtcbiAgcmV0dXJuIHtcbiAgICBbVGV4dENvbG9yTmFtZXMudXBDb3JlVHh0XTogdGhlbWVbTmV1dHJhbFZhcmlhbnRzQ29sb3JOYW1lcy51cE5ldXRyYWxfOTAwXSxcbiAgICBbVGV4dENvbG9yTmFtZXMudXBEZWVtcGhhc2lzZWRUeHQxXTogdGhlbWVbTmV1dHJhbFZhcmlhbnRzQ29sb3JOYW1lcy51cE5ldXRyYWxfNzAwXSxcbiAgICBbVGV4dENvbG9yTmFtZXMudXBEZWVtcGhhc2lzZWRUeHQyXTogdGhlbWVbTmV1dHJhbFZhcmlhbnRzQ29sb3JOYW1lcy51cE5ldXRyYWxfNTAwXSxcbiAgICBbVGV4dENvbG9yTmFtZXMudXBDb3JlVHh0SW52ZXJ0ZWRdOiB0aGVtZVtOZXV0cmFsVmFyaWFudHNDb2xvck5hbWVzLnVwV2hpdGVdLFxuICAgIFtUZXh0Q29sb3JOYW1lcy51cERlZW1waGFzaXNlZFR4dEludmVydGVkMV06IHRoZW1lW0JyYW5kMVZhcmlhbnRzQ29sb3JOYW1lcy51cEJyYW5kMV8yMDBdLFxuICAgIFtUZXh0Q29sb3JOYW1lcy51cERlZW1waGFzaXNlZFR4dEludmVydGVkMl06IHRoZW1lW0JyYW5kMVZhcmlhbnRzQ29sb3JOYW1lcy51cEJyYW5kMV80MDBdXG4gIH07XG59O1xuXG5jb25zdCBnZW5lcmF0ZUlucHV0Q29sb3JzID0gKHRoZW1lOiBQYXJ0aWFsPFRoZW1lQ29sb3JzT2JqZWN0Pik6IFRoZW1lSW5wdXRDb2xvcnMgPT4ge1xuICByZXR1cm4ge1xuICAgIFtJbnB1dENvbG9yTmFtZXMudXBJbnB1dExhYmVsXTogdGhlbWVbTmV1dHJhbFZhcmlhbnRzQ29sb3JOYW1lcy51cE5ldXRyYWxfOTAwXSxcbiAgICBbSW5wdXRDb2xvck5hbWVzLnVwSW5wdXRMYWJlbEZvY3VzXTogdGhlbWVbQnJhbmQxVmFyaWFudHNDb2xvck5hbWVzLnVwQnJhbmQxXzcwMF0sXG4gICAgW0lucHV0Q29sb3JOYW1lcy51cElucHV0TGFiZWxIb3Zlcl06IHRoZW1lW05ldXRyYWxWYXJpYW50c0NvbG9yTmFtZXMudXBOZXV0cmFsXzkwMF0sXG4gICAgW0lucHV0Q29sb3JOYW1lcy51cElucHV0Rm9jdXNdOiB0aGVtZVtCcmFuZDFWYXJpYW50c0NvbG9yTmFtZXMudXBCcmFuZDFfNTAwXSxcbiAgICBbSW5wdXRDb2xvck5hbWVzLnVwSW5wdXRQbGFjZWhvbGRlcl06IHRoZW1lW05ldXRyYWxWYXJpYW50c0NvbG9yTmFtZXMudXBOZXV0cmFsXzcwMF0sXG4gICAgW0lucHV0Q29sb3JOYW1lcy51cElucHV0VHh0XTogdGhlbWVbTmV1dHJhbFZhcmlhbnRzQ29sb3JOYW1lcy51cE5ldXRyYWxfOTAwXSxcbiAgICBbSW5wdXRDb2xvck5hbWVzLnVwSW5wdXRUeHREaXNhYmxlZF06IHRoZW1lW05ldXRyYWxWYXJpYW50c0NvbG9yTmFtZXMudXBOZXV0cmFsXzcwMF0sXG4gICAgW0lucHV0Q29sb3JOYW1lcy51cElucHV0SGVscGVyVHh0XTogdGhlbWVbTmV1dHJhbFZhcmlhbnRzQ29sb3JOYW1lcy51cE5ldXRyYWxfNzAwXSxcbiAgICBbSW5wdXRDb2xvck5hbWVzLnVwSW5wdXRIb3ZlckJvcmRlcl06IHRoZW1lW05ldXRyYWxWYXJpYW50c0NvbG9yTmFtZXMudXBOZXV0cmFsXzkwMF0sXG4gICAgW0lucHV0Q29sb3JOYW1lcy51cElucHV0SGVscGVyVHh0RXJyb3JdOiB0aGVtZVtOZWdhdGl2ZVZhcmlhbnRzQ29sb3JOYW1lcy51cE5lZ2F0aXZlXzcwMF0sXG4gICAgW0lucHV0Q29sb3JOYW1lcy51cElucHV0Qm9yZGVyXTogdGhlbWVbTmV1dHJhbFZhcmlhbnRzQ29sb3JOYW1lcy51cE5ldXRyYWxfNDAwXSxcbiAgICBbSW5wdXRDb2xvck5hbWVzLnVwSW5wdXRCb3JkZXJIb3Zlcl06IHRoZW1lW0JyYW5kM1ZhcmlhbnRzQ29sb3JOYW1lcy51cEJyYW5kM180MDBdLFxuICAgIFtJbnB1dENvbG9yTmFtZXMudXBJbnB1dEJvcmRlckZvY3VzXTogdGhlbWVbQnJhbmQxVmFyaWFudHNDb2xvck5hbWVzLnVwQnJhbmQxXzIwMF0sXG4gICAgW0lucHV0Q29sb3JOYW1lcy51cElucHV0Qm9yZGVyRXJyb3JdOiB0aGVtZVtOZWdhdGl2ZVZhcmlhbnRzQ29sb3JOYW1lcy51cE5lZ2F0aXZlXzQwMF0sXG4gICAgW0lucHV0Q29sb3JOYW1lcy51cElucHV0Qm9yZGVyV2FybmluZ106IHRoZW1lW1dhcm5pbmdWYXJpYW50c0NvbG9yTmFtZXMudXBXYXJuaW5nXzQwMF0sXG4gICAgW0lucHV0Q29sb3JOYW1lcy51cElucHV0RGlzYWJsZWRdOiB0aGVtZVtOZXV0cmFsVmFyaWFudHNDb2xvck5hbWVzLnVwTmV1dHJhbF80MDBdLFxuICAgIFtJbnB1dENvbG9yTmFtZXMudXBDYXJldF06IHRoZW1lW0JyYW5kM1ZhcmlhbnRzQ29sb3JOYW1lcy51cEJyYW5kM180MDBdLFxuICAgIFtJbnB1dENvbG9yTmFtZXMudXBJbnB1dFdhcm5pbmdUeHRFcnJvcl06IHRoZW1lW1dhcm5pbmdWYXJpYW50c0NvbG9yTmFtZXMudXBXYXJuaW5nXzcwMF1cbiAgfTtcbn07XG5cbmNvbnN0IGdlbmVyYXRlQ2hvaWNlU2VsZWN0b3JzQ29sb3JzID0gKFxuICB0aGVtZTogUGFydGlhbDxUaGVtZUNvbG9yc09iamVjdD5cbik6IFRoZW1lQ2hvaWNlU2VsZWN0b3JDb2xvcnMgPT4ge1xuICByZXR1cm4ge1xuICAgIFtDaG9pY2VTZWxlY3RvcnNDb2xvck5hbWVzLnVwQ2hvaWNlU2VsZWN0b3JMYWJlbF06XG4gICAgICB0aGVtZVtOZXV0cmFsVmFyaWFudHNDb2xvck5hbWVzLnVwTmV1dHJhbF85MDBdLFxuICAgIFtDaG9pY2VTZWxlY3RvcnNDb2xvck5hbWVzLnVwQ2hvaWNlU2VsZWN0b3JMYWJlbERpc2FibGVkXTpcbiAgICAgIHRoZW1lW05ldXRyYWxWYXJpYW50c0NvbG9yTmFtZXMudXBOZXV0cmFsXzcwMF0sXG4gICAgW0Nob2ljZVNlbGVjdG9yc0NvbG9yTmFtZXMudXBDaG9pY2VTZWxlY3Rvcl06IHRoZW1lW0JyYW5kMVZhcmlhbnRzQ29sb3JOYW1lcy51cEJyYW5kMV81MDBdLFxuICAgIFtDaG9pY2VTZWxlY3RvcnNDb2xvck5hbWVzLnVwQ2hvaWNlU2VsZWN0b3JSZWFkb25seV06XG4gICAgICB0aGVtZVtOZXV0cmFsVmFyaWFudHNDb2xvck5hbWVzLnVwTmV1dHJhbF81MDBdLFxuICAgIFtDaG9pY2VTZWxlY3RvcnNDb2xvck5hbWVzLnVwU3dpdGNoVGh1bWJPbl06IHRoZW1lW0JyYW5kMVZhcmlhbnRzQ29sb3JOYW1lcy51cEJyYW5kMV81MDBdLFxuICAgIFtDaG9pY2VTZWxlY3RvcnNDb2xvck5hbWVzLnVwU3dpdGNoVHJhY2tPbl06IHRoZW1lW0JyYW5kMVZhcmlhbnRzQ29sb3JOYW1lcy51cEJyYW5kMV8yMDBdLFxuICAgIFtDaG9pY2VTZWxlY3RvcnNDb2xvck5hbWVzLnVwU3dpdGNoVGh1bWJPZmZdOiB0aGVtZVtOZXV0cmFsVmFyaWFudHNDb2xvck5hbWVzLnVwTmV1dHJhbF85MDBdLFxuICAgIFtDaG9pY2VTZWxlY3RvcnNDb2xvck5hbWVzLnVwU3dpdGNoVHJhY2tPZmZdOiB0aGVtZVtOZXV0cmFsVmFyaWFudHNDb2xvck5hbWVzLnVwTmV1dHJhbF81MDBdLFxuICAgIFtDaG9pY2VTZWxlY3RvcnNDb2xvck5hbWVzLnVwU3dpdGNoVGh1bWJEaXNhYmxlZF06XG4gICAgICB0aGVtZVtOZXV0cmFsVmFyaWFudHNDb2xvck5hbWVzLnVwTmV1dHJhbF81MDBdLFxuICAgIFtDaG9pY2VTZWxlY3RvcnNDb2xvck5hbWVzLnVwU3dpdGNoVHJhY2tEaXNhYmxlZF06XG4gICAgICB0aGVtZVtOZXV0cmFsVmFyaWFudHNDb2xvck5hbWVzLnVwTmV1dHJhbF80MDBdXG4gIH07XG59O1xuXG5jb25zdCBnZW5lcmF0ZUJhY2tncm91bmRDb2xvcnMgPSAodGhlbWU6IFBhcnRpYWw8VGhlbWVDb2xvcnNPYmplY3Q+KTogVGhlbWVCYWNrZ3JvdW5kQ29sb3JzID0+IHtcbiAgcmV0dXJuIHtcbiAgICBbQmFja2dyb3VuZENvbG9yTmFtZXMudXBCZ106IHRoZW1lW05ldXRyYWxWYXJpYW50c0NvbG9yTmFtZXMudXBXaGl0ZV0sXG4gICAgW0JhY2tncm91bmRDb2xvck5hbWVzLnVwQmdEYXJrXTogdGhlbWVbQnJhbmRDb2xvck5hbWVzLnVwQnJhbmQyXSxcbiAgICBbQmFja2dyb3VuZENvbG9yTmFtZXMudXBCZ0RhcmtPZmZzZXQxXTogdGhlbWVbQnJhbmQxVmFyaWFudHNDb2xvck5hbWVzLnVwQnJhbmQxXzYwMF0sXG4gICAgW0JhY2tncm91bmRDb2xvck5hbWVzLnVwQmdEYXJrT2Zmc2V0Ml06IHRoZW1lW0JyYW5kMVZhcmlhbnRzQ29sb3JOYW1lcy51cEJyYW5kMV80MDBdLFxuICAgIFtCYWNrZ3JvdW5kQ29sb3JOYW1lcy51cEJnRGFya09mZnNldDNdOiB0aGVtZVtCcmFuZDFWYXJpYW50c0NvbG9yTmFtZXMudXBCcmFuZDFfMjAwXVxuICB9O1xufTtcblxuY29uc3QgZ2VuZXJhdGVHcmFwaGljc0NvbG9ycyA9ICh0aGVtZTogUGFydGlhbDxUaGVtZUNvbG9yc09iamVjdD4pOiBUaGVtZUdyYXBoaWNzQ29sb3JzID0+IHtcbiAgcmV0dXJuIHtcbiAgICBbR3JhcGhpY3NDb2xvck5hbWVzLnVwRGl2aWRlckRhcmtdOiB0aGVtZVtCcmFuZDFWYXJpYW50c0NvbG9yTmFtZXMudXBCcmFuZDFfNDAwXVxuICB9O1xufTtcblxuY29uc3QgZ2VuZXJhdGVJY29uQ29sb3JzID0gKHRoZW1lOiBQYXJ0aWFsPFRoZW1lQ29sb3JzT2JqZWN0Pik6IFRoZW1lSWNvbkNvbG9ycyA9PiB7XG4gIHJldHVybiB7XG4gICAgW0ljb25Db2xvck5hbWVzLnVwSWNdOiB0aGVtZVtOZXV0cmFsVmFyaWFudHNDb2xvck5hbWVzLnVwTmV1dHJhbF85MDBdLFxuICAgIFtJY29uQ29sb3JOYW1lcy51cEljRGVlbXBoYXNpc2VkXTogdGhlbWVbTmV1dHJhbFZhcmlhbnRzQ29sb3JOYW1lcy51cE5ldXRyYWxfNzAwXSxcbiAgICBbSWNvbkNvbG9yTmFtZXMudXBJY0Rlc3RydWN0aXZlXTogdGhlbWVbTmVnYXRpdmVWYXJpYW50c0NvbG9yTmFtZXMudXBOZWdhdGl2ZV80MDBdXG4gIH07XG59O1xuXG5jb25zdCBnZW5lcmF0ZU5hdmlnYXRpb25TaWRlYmFyQ29sb3JzID0gKFxuICB0aGVtZTogUGFydGlhbDxUaGVtZUNvbG9yc09iamVjdD5cbik6IFRoZW1lTmF2aWdhdGlvblNpZGViYXJDb2xvcnMgPT4ge1xuICByZXR1cm4ge1xuICAgIFtOYXZpZ2F0aW9uU2lkZWJhckNvbG9yTmFtZXMudXBOYXZMaW5rXTogdGhlbWVbQnJhbmQxVmFyaWFudHNDb2xvck5hbWVzLnVwQnJhbmQxXzIwMF0sXG4gICAgW05hdmlnYXRpb25TaWRlYmFyQ29sb3JOYW1lcy51cE5hdkxpbmtIb3Zlcl06IHRoZW1lW0JyYW5kM1ZhcmlhbnRzQ29sb3JOYW1lcy51cEJyYW5kM180MDBdLFxuICAgIFtOYXZpZ2F0aW9uU2lkZWJhckNvbG9yTmFtZXMudXBOYXZMaW5rQWN0aXZlXTogdGhlbWVbTmV1dHJhbFZhcmlhbnRzQ29sb3JOYW1lcy51cFdoaXRlXSxcbiAgICBbTmF2aWdhdGlvblNpZGViYXJDb2xvck5hbWVzLnVwTmF2TGlua0JnQWN0aXZlXTogdGhlbWVbQnJhbmQxVmFyaWFudHNDb2xvck5hbWVzLnVwQnJhbmQxXzYwMF1cbiAgfTtcbn07XG5cbmNvbnN0IGdlbmVyYXRlQ29sb3JWYXJpYW50S2V5ID0gKGNvbG9yOiBCcmFuZENvbG9yTmFtZXMsIHZhcmlhbnQ6IENvbG9yVmFyaWFudCkgPT4ge1xuICByZXR1cm4gYCR7Y29sb3J9LSR7dmFyaWFudH1gO1xufTtcblxuY29uc3QgZ2V0QmFzZURhcmsgPSAoY29sb3I6IFJnYkNvbG9yKSA9PiB7XG4gIGNvbnN0IGIgPSBNYXRoLmZsb29yKChjb2xvci5iICogY29sb3IuYikgLyAyNTUpO1xuICBjb25zdCByID0gTWF0aC5mbG9vcigoY29sb3IuciAqIGNvbG9yLnIpIC8gMjU1KTtcbiAgY29uc3QgZyA9IE1hdGguZmxvb3IoKGNvbG9yLmcgKiBjb2xvci5nKSAvIDI1NSk7XG4gIHJldHVybiB0aW55Y29sb3IoeyByLCBnLCBiIH0pO1xufTtcbiJdfQ==